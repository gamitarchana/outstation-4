{% load static %}

{% load filters %}

{% load wagtailcore_tags wagtailimages_tags %}

{% block content %}
<div style="position:relative;">
<div class= "map-block-container">
<svg xmlns="http://www.w3.org/2000/svg" id="map-block-4" data-name="Map block 4" preserveAspectRatio="xMidYMin slice" viewBox="0 0 440 250"><title>Map block 4</title><path d="M440-891.27v169.44A17.82,17.82,0,0,1,422.18-704h-8.95a26.26,26.26,0,0,0-26.15,23.91c-.07.78-.11,1.56-.11,2.36v53.53a26.26,26.26,0,0,0,26.26,26.26h-4.9A31.67,31.67,0,0,1,440-566.27v82.44A17.82,17.82,0,0,1,422.18-466H377.46a62.33,62.33,0,0,0-44.22,18.32,62.35,62.35,0,0,0-18.31,44.22,62.28,62.28,0,0,0,11.89,36.7q1.67,2.29,3.52,4.42a62.39,62.39,0,0,0,46.15,21.41,17,17,0,0,1,2.25.17c8.05,1.2,52,10.13,60.39,63.67.13.82.24,1.64.34,2.48s.18,1.66.25,2.5q.28,3.23.28,6.52v359l-.63.4-3.89,2.49L431.16,99l0,0-3.68,2.35-57.78,37a19.45,19.45,0,0,1-2.2,1.2,37.27,37.27,0,0,0-21.38,33.72v137.4A75.32,75.32,0,0,0,421.56,386a17.4,17.4,0,0,1,13.49,6.38,20.9,20.9,0,0,1,1.42,2,21.14,21.14,0,0,1,2.34,4.8A21.93,21.93,0,0,1,440,406.3V709.6A40.4,40.4,0,0,1,399.6,750H153.46a153.49,153.49,0,0,1-116.6-53.69h0A153.47,153.47,0,0,1,0,596.55V207.78a22,22,0,0,1,3.36-11.71,17.59,17.59,0,0,1,10.46-7.46,35.79,35.79,0,0,0,7.36-2.86l.87,0h-.82a36.08,36.08,0,0,0,13.64-12.51,36.31,36.31,0,0,0,2.5-4.64,35.73,35.73,0,0,0,3.13-14.67V105.53a36,36,0,0,0-1.81-11.29,35.54,35.54,0,0,0-1.89-4.6C33.33,82.6,21,76.87,11.59,73.38A17.81,17.81,0,0,1,0,56.68v-357.1a49.67,49.67,0,0,1,14.56-35.12l14.63-14.63a35,35,0,0,0,0-49.5l-18.4-18.41A36.79,36.79,0,0,1,0-444.11V-982.18A17.83,17.83,0,0,1,17.83-1000H299.7a162.64,162.64,0,0,1,115,47.63h0A86.42,86.42,0,0,1,440-891.27Z" style="fill:#f4cc36"/><path d="M312,96.27H435.48l3.89-2.49h0l.62-.4v-2a2.59,2.59,0,0,0-.63-.08H189.49V51.74A2.49,2.49,0,0,0,187,49.25H-1.88a2.38,2.38,0,0,0-1.32.39,35.54,35.54,0,0,1,1.89,4.6H184.51V168.58H37.37a36.31,36.31,0,0,1-2.5,4.64,2.47,2.47,0,0,0,1.27.35H187a2.49,2.49,0,0,0,2.49-2.49V96.27H307V202.41a2.48,2.48,0,0,0,2.49,2.49h36.58v-5H312Z" style="fill:#ffda52"/><path d="M220.12-815v98.77A21.25,21.25,0,0,1,199.2-695l-8.5.13a25,25,0,0,0-24.58,25v20.18a25.17,25.17,0,0,0,13.36,22.23l29.92,14.59a19.71,19.71,0,0,1,11.08,17.75l-.35,636.3A25.82,25.82,0,0,0,245.53,67h0A27.25,27.25,0,0,1,272.34,94.2l.06,55A30.8,30.8,0,0,1,252.71,178L240,182.91a31.13,31.13,0,0,0-19.89,29v98.12a25.54,25.54,0,0,1-24.81,25.53l-8.36.24a26.13,26.13,0,0,0-25.38,26.39l.39,37.6a31.25,31.25,0,0,0,15.53,26.68l22.93,13.35a39.66,39.66,0,0,1,19.7,34.26V599" style="fill:none;stroke:#282460;stroke-linecap:round;stroke-miterlimit:10;stroke-width:10px"/><path d="M220.12-815v98.77A21.25,21.25,0,0,1,199.2-695l-8.5.13a25,25,0,0,0-24.58,25v20.18a25.17,25.17,0,0,0,13.36,22.23l29.92,14.59a19.71,19.71,0,0,1,11.08,17.75l-.35,636.3A25.82,25.82,0,0,0,245.53,67h0A27.25,27.25,0,0,1,272.34,94.2l.06,55A30.8,30.8,0,0,1,252.71,178L240,182.91a31.13,31.13,0,0,0-19.89,29v98.12a25.54,25.54,0,0,1-24.81,25.53l-8.36.24a26.13,26.13,0,0,0-25.38,26.39l.39,37.6a31.25,31.25,0,0,0,15.53,26.68l22.93,13.35a39.66,39.66,0,0,1,19.7,34.26V599" style="fill:none;stroke:#fff;stroke-linecap:round;stroke-miterlimit:10;stroke-width:2px;stroke-dasharray:6,8"/>
  <use xlink:href="#tree" x="0"  y="0" width="70%" height="70%" />
  <use xlink:href="#tree" x="350"  y="90" width="70%" height="70%" />
</svg>

</div >
<div class="map-image-icon-block map-block-4 height-100percent">
  <div class="image-container">
    <div>
      {% with location.place.place_images.all|item:"0" as location_image %}
      {% image location_image.image fill-200x200 as map_img %}
        <img class="map-image" src ="{{map_img.url}}" alt="{{map_img.alt}}">
      {% endwith %}
    </div>
    <div id="mapIcon-4">
      {% image location.place.map_icon max-200x200 as map_icon %}
        <img  src ="{{map_icon.url}}" alt="" class="map-icon-small">
    </div>
  </div>
  <div style="margin:10px 0px">
    {% include 'map/map_info.html' with isRightAlign=False %}
  </div>
</div>
<div id="amenties4" class="amenities-container right">
  <div class="amenities-row row-container right" style="width:90%"></div>
  <div class="amenities-row row-container" style="width:90%"></div>
  <div class="amenities-row row-container" style="width:90%"></div>
</div>
</div>
{% endblock%}

<script type="text/javascript">
(function() {
  var amenityContainer = document.getElementById("amenties4").querySelectorAll('div');
  {% for location_amenity in location.amenities %}
    {% with location_amenity.value as amenity %}
      var amenity = ""
      {% if amenity.amenity_type == amenities.lodging.value %}
        amenity = "<div class='tooltip'><i class='fa fa-bed map-amenities-icon'></i><span class='tooltiptext right'>{{amenity.location}}</span></div>"
      {% endif %}
      {% if amenity.amenity_type == amenities.eating_place.value %}
        amenity = "<div class='tooltip'><i class='fa fa-utensils map-amenities-icon'></i><span class='tooltiptext right'>{{amenity.location}}</span></div>"
      {% endif %}
      {% if amenity.amenity_type == amenities.petrol_pump.value %}
        amenity = "<div class='tooltip'><i class='fa fa-gas-pump map-amenities-icon'></i><span class='tooltiptext right'>{{amenity.location}}</span></div>"
      {% endif %}

      var amenityDiv = document.createElement("DIV");
      amenityDiv.innerHTML = amenity;
      {% with forloop.counter|mod:3 as containerNum %}
        {% if containerNum == 0 %}
          amenityContainer[2].appendChild(amenityDiv);
        {% else %}
          amenityContainer[({{containerNum}}-1)].appendChild(amenityDiv);
        {% endif %}
      {% endwith %}
    {% endwith %}
  {% endfor %}
})();
</script>
