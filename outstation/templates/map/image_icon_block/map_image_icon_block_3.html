{% load static %}

{% load filters %}

{% load wagtailcore_tags wagtailimages_tags %}

{% block content %}
<div style="position:relative;">
<div class= "map-block-container">
<svg xmlns="http://www.w3.org/2000/svg" id="map-block-3" data-name="Map block 3" preserveAspectRatio="xMidYMin slice" viewBox="0 0 440 250"><title>Map block 3</title><path d="M440-641.27v169.44A17.82,17.82,0,0,1,422.13-454h-8.95A26.26,26.26,0,0,0,387-430.09c-.07.78-.11,1.56-.11,2.36v53.53a26.26,26.26,0,0,0,26.26,26.26h-4.9A31.67,31.67,0,0,1,440-316.27v82.44A17.82,17.82,0,0,1,422.13-216H377.41a62.33,62.33,0,0,0-44.22,18.32,62.35,62.35,0,0,0-18.31,44.22,62.28,62.28,0,0,0,11.89,36.7q1.67,2.3,3.52,4.42a62.37,62.37,0,0,0,46.14,21.41,16.79,16.79,0,0,1,2.25.17c8.06,1.2,52,10.13,60.4,63.67.13.82.24,1.64.34,2.48s.18,1.66.25,2.5q.29,3.22.28,6.52v359l-.63.4-3.89,2.49L431.11,349l0,0-3.68,2.35-57.78,37a20.35,20.35,0,0,1-2.2,1.2A37.27,37.27,0,0,0,346,423.29v137.4A75.32,75.32,0,0,0,421.5,636a17.41,17.41,0,0,1,13.5,6.38,22.87,22.87,0,0,1,1.42,2,21.14,21.14,0,0,1,2.34,4.8A21.93,21.93,0,0,1,440,656.3V959.6a40.4,40.4,0,0,1-40.4,40.4H153.4A153.46,153.46,0,0,1,36.81,946.31h0A153.41,153.41,0,0,1,0,846.55V457.78a22,22,0,0,1,3.36-11.71,17.59,17.59,0,0,1,10.46-7.46,36,36,0,0,0,7.36-2.86l.87,0h-.82a36.08,36.08,0,0,0,13.64-12.51,36.31,36.31,0,0,0,2.5-4.64,35.73,35.73,0,0,0,3.13-14.67V355.53a36,36,0,0,0-1.81-11.29,35.54,35.54,0,0,0-1.89-4.6c-3.47-7-15.77-12.77-25.21-16.26A17.81,17.81,0,0,1,0,306.68V-50.42A49.7,49.7,0,0,1,14.5-85.54l14.64-14.63a35,35,0,0,0,0-49.5L10.73-168.08A36.82,36.82,0,0,1,0-194.11V-732.18A17.82,17.82,0,0,1,17.78-750H299.65a162.64,162.64,0,0,1,115,47.63h0A86.42,86.42,0,0,1,440-641.27Z" style="fill:#f4cc36"/><path d="M317.38,100.91v92H440v5H122.19a2.49,2.49,0,0,1-2.5-2.49V74.24H0v-5H122.19a2.5,2.5,0,0,1,2.49,2.49V192.92h187.7V98.41a2.49,2.49,0,0,1,2.5-2.5H440v5Z" style="fill:#ffda52"/><path d="M220.06-565v98.77A21.24,21.24,0,0,1,199.15-445l-8.5.13a25,25,0,0,0-24.59,25v20.18a25.18,25.18,0,0,0,13.37,22.23l29.92,14.59a19.73,19.73,0,0,1,11.08,17.75l-.35,636.3A25.82,25.82,0,0,0,245.48,317h0a27.24,27.24,0,0,1,26.8,27.21l.07,55A30.8,30.8,0,0,1,252.66,428L240,432.91a31.14,31.14,0,0,0-19.9,29v98.12a25.53,25.53,0,0,1-24.8,25.53l-8.36.24a26.13,26.13,0,0,0-25.38,26.39l.39,37.6a31.26,31.26,0,0,0,15.52,26.68l22.93,13.35a39.64,39.64,0,0,1,19.7,34.26V849" style="fill:none;stroke:#282460;stroke-linecap:round;stroke-miterlimit:10;stroke-width:10px"/><path d="M220.06-565v98.77A21.24,21.24,0,0,1,199.15-445l-8.5.13a25,25,0,0,0-24.59,25v20.18a25.18,25.18,0,0,0,13.37,22.23l29.92,14.59a19.73,19.73,0,0,1,11.08,17.75l-.35,636.3A25.82,25.82,0,0,0,245.48,317h0a27.24,27.24,0,0,1,26.8,27.21l.07,55A30.8,30.8,0,0,1,252.66,428L240,432.91a31.14,31.14,0,0,0-19.9,29v98.12a25.53,25.53,0,0,1-24.8,25.53l-8.36.24a26.13,26.13,0,0,0-25.38,26.39l.39,37.6a31.26,31.26,0,0,0,15.52,26.68l22.93,13.35a39.64,39.64,0,0,1,19.7,34.26V849" style="fill:none;stroke:#fff;stroke-linecap:round;stroke-miterlimit:10;stroke-width:2px;stroke-dasharray:6,8"/>
  <use xlink:href="#tree" x="0"  y="20" width="70%" height="70%" />
  <use xlink:href="#tree" x="50"  y="40" width="70%" height="70%" />
  <!--use xlink:href="#tree" x="380"  y="150" width="70%" height="70%" /-->
</svg>

</div >
<div class="map-image-icon-block map-block-3 height-100percent">
  <div style="margin:10px 0px">
    {% include 'map/map_info.html' with isRightAlign=True %}
  </div>
  <div class="image-container">
    <div>
      {% with location.place.place_images.all|item:"0" as location_image %}
      {% image location_image.image fill-200x200 as map_img %}
        <img class="map-image" src ="{{map_img.url}}" alt="{{map_img.alt}}">
      {% endwith %}
    </div>
    <div id="mapIcon-3">
      {% image location.place.map_icon max-200x200 as map_icon %}
        <img  src ="{{map_icon.url}}" alt="" class="map-icon-small">
    </div>
  </div>
  </div>
  <div id="amenties3" class="amenities-container">
    <div class="amenities-row row-container-row-reverse" style="width:95%"></div>
    <div class="amenities-row row-container-row-reverse" style="width:95%"></div>
    <div class="amenities-row row-container-row-reverse" style="width:95%"></div>
  </div>
  </div>
  {% endblock%}

  <script type="text/javascript">
  (function() {
    var amenityContainer = document.getElementById("amenties3").querySelectorAll('div');
    {% for location_amenity in location.amenities %}
      {% with location_amenity.value as amenity %}
        var amenity = ""
        {% if amenity.amenity_type == amenities.lodging.value %}
          amenity = "<div class='tooltip'><i class='fa fa-bed map-amenities-icon'></i><span class='tooltiptext'>{{amenity.location}}</span></div>"
        {% endif %}
        {% if amenity.amenity_type == amenities.eating_place.value %}
          amenity = "<div class='tooltip'><i class='fa fa-utensils map-amenities-icon'></i><span class='tooltiptext'>{{amenity.location}}</span></div>"
        {% endif %}
        {% if amenity.amenity_type == amenities.petrol_pump.value %}
          amenity = "<div class='tooltip'><i class='fa fa-gas-pump map-amenities-icon'></i><span class='tooltiptext'>{{amenity.location}}</span></div>"
        {% endif %}

        var amenityDiv = document.createElement("DIV");
        amenityDiv.innerHTML = amenity;
        {% with forloop.counter|mod:3 as containerNum %}
          {% if containerNum == 0 %}
            amenityContainer[2].appendChild(amenityDiv);
          {% else %}
            amenityContainer[({{containerNum}}-1)].appendChild(amenityDiv);
          {% endif %}
        {% endwith %}
      {% endwith %}
    {% endfor %}
  })();
  </script>
