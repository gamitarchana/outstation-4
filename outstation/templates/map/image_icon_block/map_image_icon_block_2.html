{% load static %}

{% load filters %}

{% load wagtailcore_tags wagtailimages_tags %}

{% block content %}
<div style="position:relative;">
<div class= "map-block-container">
<svg xmlns="http://www.w3.org/2000/svg" id="map-block-2" data-name="Map block 2" preserveAspectRatio="xMidYMin slice" viewBox="0 0 440 250"><title>Map block 2</title><path d="M440-391.27v169.44A17.82,17.82,0,0,1,422.13-204h-8.95A26.26,26.26,0,0,0,387-180.09c-.07.78-.11,1.56-.11,2.36v53.53a26.26,26.26,0,0,0,26.26,26.26h-4.9A31.67,31.67,0,0,1,440-66.27V16.17A17.82,17.82,0,0,1,422.13,34H377.41a62.55,62.55,0,0,0-50.64,99.24q1.67,2.3,3.52,4.42a62.37,62.37,0,0,0,46.14,21.41,16.79,16.79,0,0,1,2.25.17c8.06,1.2,52,10.13,60.4,63.67.13.82.24,1.64.34,2.48s.18,1.66.25,2.5q.29,3.23.28,6.52v359l-.63.4-3.89,2.49L431.11,599l0,0-3.68,2.35-57.78,37a20.35,20.35,0,0,1-2.2,1.2A37.27,37.27,0,0,0,346,673.29v137.4A75.32,75.32,0,0,0,421.5,886a17.41,17.41,0,0,1,13.5,6.38,22.87,22.87,0,0,1,1.42,2,21.14,21.14,0,0,1,2.34,4.8A21.93,21.93,0,0,1,440,906.3v303.3a40.4,40.4,0,0,1-40.4,40.4H153.4a153.46,153.46,0,0,1-116.59-53.69h0A153.41,153.41,0,0,1,0,1096.55V707.78a22,22,0,0,1,3.36-11.71,17.59,17.59,0,0,1,10.46-7.46,36,36,0,0,0,7.36-2.86l.87,0h-.82a36.08,36.08,0,0,0,13.64-12.51,36.31,36.31,0,0,0,2.5-4.64,35.73,35.73,0,0,0,3.13-14.67V605.53a36,36,0,0,0-1.81-11.29,35.54,35.54,0,0,0-1.89-4.6c-3.47-7-15.77-12.77-25.21-16.26A17.81,17.81,0,0,1,0,556.68V199.58A49.7,49.7,0,0,1,14.5,164.46l14.64-14.63a35,35,0,0,0,0-49.5L10.73,81.92A36.82,36.82,0,0,1,0,55.89V-482.18A17.82,17.82,0,0,1,17.78-500H299.65a162.64,162.64,0,0,1,115,47.63h0A86.42,86.42,0,0,1,440-391.27Z" style="fill:#f4cc36"/><path d="M439.67,227.89l-.3,0H302.62a2.49,2.49,0,0,1-1.77-.73l-24.33-24.34a2.47,2.47,0,0,1-.74-1.76V138.24H136.7a2.46,2.46,0,0,1-1.54-.53L0,31.82v-6A2.33,2.33,0,0,1,1,26.32L137.56,133.24H326.77q1.67,2.3,3.52,4.42a2.49,2.49,0,0,1-1.6.58H280.78V200l22.87,22.87H439.08C439.33,224.55,439.53,226.21,439.67,227.89Z" style="fill:#ffda52"/><path d="M220.06-315v98.77A21.24,21.24,0,0,1,199.15-195l-8.5.13a25,25,0,0,0-24.59,25v20.18a25.18,25.18,0,0,0,13.37,22.23l29.92,14.59a19.73,19.73,0,0,1,11.08,17.75l-.35,636.3A25.82,25.82,0,0,0,245.48,567h0a27.24,27.24,0,0,1,26.8,27.21l.07,55A30.8,30.8,0,0,1,252.66,678L240,682.91a31.14,31.14,0,0,0-19.9,29v98.12a25.53,25.53,0,0,1-24.8,25.53l-8.36.24a26.13,26.13,0,0,0-25.38,26.39l.39,37.6a31.26,31.26,0,0,0,15.52,26.68l22.93,13.35a39.64,39.64,0,0,1,19.7,34.26V1099" style="fill:none;stroke:#282460;stroke-linecap:round;stroke-miterlimit:10;stroke-width:10px"/><path d="M220.06-315v98.77A21.24,21.24,0,0,1,199.15-195l-8.5.13a25,25,0,0,0-24.59,25v20.18a25.18,25.18,0,0,0,13.37,22.23l29.92,14.59a19.73,19.73,0,0,1,11.08,17.75l-.35,636.3A25.82,25.82,0,0,0,245.48,567h0a27.24,27.24,0,0,1,26.8,27.21l.07,55A30.8,30.8,0,0,1,252.66,678L240,682.91a31.14,31.14,0,0,0-19.9,29v98.12a25.53,25.53,0,0,1-24.8,25.53l-8.36.24a26.13,26.13,0,0,0-25.38,26.39l.39,37.6a31.26,31.26,0,0,0,15.52,26.68l22.93,13.35a39.64,39.64,0,0,1,19.7,34.26V1099" style="fill:none;stroke:#fff;stroke-linecap:round;stroke-miterlimit:10;stroke-width:2px;stroke-dasharray:6,8"/>
  <!--use xlink:href="#tree" x="180"  y="50" width="70%" height="70%" /-->
  <use xlink:href="#tree" x="350"  y="130" width="70%" height="70%" />
</svg>

</div >
<div class="map-image-icon-block map-block-2 height-100percent ">
  <div class="image-container">
    <div id="mapImage-2">
      {% with location.place.place_images.all|item:"0" as location_image %}
      {% image location_image.image fill-200x200 as map_img %}
        <img class="map-image" src="{{map_img.url}}" alt="{{map_img.alt}}">
      {% endwith %}
    </div>
  </div>
  <div style="margin:10px 0px">
  {% include 'map/map_info.html' with isRightAlign=False %}
  </div>
  <div id="mapIcon-2">
    {% image location.place.map_icon max-200x200 as map_icon %}
      <img src ="{{map_icon.url}}" alt="" class="map-icon-small">
  </div>
</div>
<div id="amenties2" class="amenities-container right">
  <div class="amenities-row row-container" style="width:80%"></div>
  <div class="amenities-row row-container" style="width:80%"></div>
  <div class="amenities-row row-container" style="width:80%"></div>
</div>
</div>
{% endblock%}

<script type="text/javascript">
(function() {
  var amenityContainer = document.getElementById("amenties2").querySelectorAll('div');
  {% for location_amenity in location.amenities %}
    {% with location_amenity.value as amenity %}
      var amenity = ""
      {% if amenity.amenity_type == amenities.lodging.value %}
        amenity = "<div class='tooltip'><i class='fa fa-bed map-amenities-icon'></i><span class='tooltiptext right'>{{amenity.location}}</span></div>"
      {% endif %}
      {% if amenity.amenity_type == amenities.eating_place.value %}
        amenity = "<div class='tooltip'><i class='fa fa-utensils map-amenities-icon'></i><span class='tooltiptext right'>{{amenity.location}}</span></div>"
      {% endif %}
      {% if amenity.amenity_type == amenities.petrol_pump.value %}
        amenity = "<div class='tooltip'><i class='fa fa-gas-pump map-amenities-icon'></i><span class='tooltiptext right'>{{amenity.location}}</span></div>"
      {% endif %}

      var amenityDiv = document.createElement("DIV");
      amenityDiv.innerHTML = amenity;
      {% with forloop.counter|mod:3 as containerNum %}
        {% if containerNum == 0 %}
          amenityContainer[2].appendChild(amenityDiv);
        {% else %}
          amenityContainer[({{containerNum}}-1)].appendChild(amenityDiv);
        {% endif %}
      {% endwith %}
    {% endwith %}
  {% endfor %}
})();
</script>
