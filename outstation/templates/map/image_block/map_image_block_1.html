{% load static %}

{% load filters %}

{% load wagtailcore_tags wagtailimages_tags %}

{% block content %}
<div style="position:relative;">
<div class= "map-image-block-container">
<svg xmlns="http://www.w3.org/2000/svg" id="map-block-1" data-name="Map block 1" preserveAspectRatio="xMidYMin slice" viewBox="0 0 440 180"><title>Map block 1</title><path d="M440-141.27V28.17A17.82,17.82,0,0,1,422.17,46h-8.95a26.26,26.26,0,0,0-26.15,23.91c-.07.78-.11,1.56-.11,2.36V125.8a26.26,26.26,0,0,0,26.26,26.26h-4.9A31.67,31.67,0,0,1,440,183.73v82.44A17.82,17.82,0,0,1,422.17,284H377.45a62.55,62.55,0,0,0-50.64,99.24q1.67,2.29,3.52,4.42a62.37,62.37,0,0,0,46.14,21.41,17.06,17.06,0,0,1,2.26.17c8,1.2,52,10.13,60.39,63.67.13.82.24,1.64.34,2.48s.18,1.66.25,2.5q.29,3.23.28,6.52v359l-.63.4-3.89,2.49L431.15,849l0,0-3.68,2.35-57.78,37a19.45,19.45,0,0,1-2.2,1.2,37.27,37.27,0,0,0-21.38,33.72v137.4A75.32,75.32,0,0,0,421.55,1136a17.4,17.4,0,0,1,13.49,6.38,20.9,20.9,0,0,1,1.42,2,21.14,21.14,0,0,1,2.34,4.8,21.93,21.93,0,0,1,1.19,7.15v303.3a40.4,40.4,0,0,1-40.4,40.4H153.45a153.49,153.49,0,0,1-116.6-53.69h0A153.47,153.47,0,0,1,0,1346.55V957.78a22,22,0,0,1,3.36-11.71,17.59,17.59,0,0,1,10.46-7.46,35.79,35.79,0,0,0,7.36-2.86l.87,0h-.82a36.08,36.08,0,0,0,13.64-12.51,36.31,36.31,0,0,0,2.5-4.64,35.73,35.73,0,0,0,3.13-14.67V855.53a36,36,0,0,0-1.81-11.29,35.54,35.54,0,0,0-1.89-4.6c-3.47-7-15.77-12.77-25.21-16.26A17.81,17.81,0,0,1,0,806.68V449.58a49.67,49.67,0,0,1,14.56-35.12l14.63-14.63a35,35,0,0,0,0-49.5l-18.4-18.41A36.79,36.79,0,0,1,0,305.89V-232.18A17.83,17.83,0,0,1,17.82-250H299.69a162.64,162.64,0,0,1,115,47.63h0A86.42,86.42,0,0,1,440-141.27Z" style="fill:#f4cc36"/><path d="M295.49,214.58V74.91H387V72.27c0-.8,0-1.58.11-2.36H0v5H95.82V185.37l-29.2,29.21H0v5H67.66a2.47,2.47,0,0,0,1.76-.74l30.67-30.66a2.51,2.51,0,0,0,.73-1.77V74.91H290.49V217.08a2.5,2.5,0,0,0,2.5,2.5H440v-5Z" style="fill:#ffda52"/><path d="M220.11-65V33.76A21.25,21.25,0,0,1,199.19,55l-8.5.13a25,25,0,0,0-24.58,25v20.18a25.17,25.17,0,0,0,13.36,22.23l29.92,14.59a19.71,19.71,0,0,1,11.08,17.75l-.35,636.3A25.82,25.82,0,0,0,245.52,817h0a27.25,27.25,0,0,1,26.81,27.21l.06,55A30.8,30.8,0,0,1,252.7,928L240,932.91a31.13,31.13,0,0,0-19.89,29v98.12a25.54,25.54,0,0,1-24.81,25.53l-8.36.24a26.13,26.13,0,0,0-25.38,26.39l.39,37.6a31.25,31.25,0,0,0,15.53,26.68l22.93,13.35a39.66,39.66,0,0,1,19.7,34.26V1349" style="fill:none;stroke:#282460;stroke-linecap:round;stroke-miterlimit:10;stroke-width:10px"/><path d="M220.11-65V33.76A21.25,21.25,0,0,1,199.19,55l-8.5.13a25,25,0,0,0-24.58,25v20.18a25.17,25.17,0,0,0,13.36,22.23l29.92,14.59a19.71,19.71,0,0,1,11.08,17.75l-.35,636.3A25.82,25.82,0,0,0,245.52,817h0a27.25,27.25,0,0,1,26.81,27.21l.06,55A30.8,30.8,0,0,1,252.7,928L240,932.91a31.13,31.13,0,0,0-19.89,29v98.12a25.54,25.54,0,0,1-24.81,25.53l-8.36.24a26.13,26.13,0,0,0-25.38,26.39l.39,37.6a31.25,31.25,0,0,0,15.53,26.68l22.93,13.35a39.66,39.66,0,0,1,19.7,34.26V1349" style="fill:none;stroke:#fff;stroke-linecap:round;stroke-miterlimit:10;stroke-width:2px;stroke-dasharray:6,8"/>

  <use xlink:href="#tree" x="0"  y="0" width="80%" height="80%" />
  <use xlink:href="#tree" x="50"  y="150" width="80%" height="80%" />
  <!--use xlink:href="#tree" x="360"  y="0" width="70%" height="70%" /-->

</svg>

</div>
  <div class="map-image-block map-image-block-1">
    <div id="mapImage">
      <div>
        {% with location.place.place_images.all|item:"0" as location_image %}
        {% image location_image.image fill-200x200 as map_img %}
          <img class="map-image" src ="{{map_img.url}}" alt="{{map_img.alt}}">
        {% endwith %}
      </div>
    </div>
    <div>
      {% include 'map/map_info.html' with location=location isRightAlign=True %}
    </div>
  </div>
  <div id="amenties1" class="amenities-container">
    <div class="amenities-row row-container-row-reverse" style="width:95%"></div>
    <div class="amenities-row row-container-row-reverse" style="width:70%"></div>
    <div class="amenities-row row-container-row-reverse" style="width:70%"></div>
  </div>
</div>

{% endblock%}

<script type="text/javascript">
(function() {
  var amenityContainer = document.getElementById("amenties1").querySelectorAll('div');
  {% for location_amenity in location.amenities %}
    {% with location_amenity.value as amenity %}
      var amenity = ""
      {% if amenity.amenity_type == amenities.lodging.value %}
        amenity = "<div class='tooltip'><i class='fa fa-bed map-amenities-icon'></i><span class='tooltiptext'>{{amenity.location}}</span></div>"
      {% endif %}
      {% if amenity.amenity_type == amenities.eating_place.value %}
        amenity = "<div class='tooltip'><i class='fa fa-utensils map-amenities-icon'></i><span class='tooltiptext'>{{amenity.location}}</span></div>"
      {% endif %}
      {% if amenity.amenity_type == amenities.petrol_pump.value %}
        amenity = "<div class='tooltip'><i class='fa fa-gas-pump map-amenities-icon'></i><span class='tooltiptext'>{{amenity.location}}</span></div>"
      {% endif %}

      var amenityDiv = document.createElement("DIV");
      amenityDiv.innerHTML = amenity;
      {% with forloop.counter|mod:3 as containerNum %}
        {% if containerNum == 0 %}
          amenityContainer[2].appendChild(amenityDiv);
        {% else %}
          amenityContainer[({{containerNum}}-1)].appendChild(amenityDiv);
        {% endif %}
      {% endwith %}
    {% endwith %}
  {% endfor %}
})();
</script>
